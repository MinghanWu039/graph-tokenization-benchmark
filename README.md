# Benchmarking for Graph Tokenization Methods

## What We Want to Know

How to use graph tokenization method to generate sequences from graphs that are suitable as inputs for transformers? How does this approach compare with SoTA graph transformer method like GraphGPS?

*In short, benchmarking graph learning methods for several graph tasks*,

## Papers \& Code

### Key Results used in Benchmarking

- [Recipe for a General, Powerful, Scalable Graph Transformer](https://arxiv.org/abs/2205.12454) i.e. GraphGPS

- [Flatten Graphs as Sequences: Transformers are Scalable Graph Generators](https://arxiv.org/abs/2502.02216) i.e. Autograph

- [graph-token](https://github.com/alip67/graph-token)

- MPNN

### Other foundamental papers

- [GAT](https://arxiv.org/abs/1710.10903)
- [Graph transformer](https://arxiv.org/abs/2012.09699)
- [Attending to Graph Transformers](https://arxiv.org/abs/2302.04181)

## Evaluation Pipeline

Tasks: 
1) Cycle check on a synthetic dataset 
2) Shortest-path distance estimation on a synthetic dataset
3) Graph classification on ZINC 12k subset

Approaches: 
1) GraphGPS 
2) MPNN 
3) tokenization via autograph -> transformer
4) tokenization via graph-token -> transformer

Training scripts: 
1) GraphGPS codebase for GraphGPS 
2) Custom pytorch-geometric for MPNN 
3) Custom transformer training for tokenization approaches

Data source: Synthetic graphs generated by [graph-token](https://github.com/alip67/graph-token).

## How To Run Tasks

1. Make sure you populated and updated the submodules

2. Make sure you installed ```graphgps``` conda environment as prescribed in ```GraphGPS/README.md```

3. For cycle check:
   - Generate graphs: `bash scripts/get_graph_token_graphs.sh cycle-check`
   - Produce graph-token labels/sequences: `bash scripts/get_graph_token_cycle_check.sh`
   - Produce autograph sequences: `bash scripts/get_autograph_seq_cycle_check.sh`
   - Train GraphGPS baseline: `bash scripts/run_graphgps_cycle_check.sh`
   - Train GatedGCN baseline: `bash scripts/run_gatedgcn_cycle_check.sh`
   - Train sequence transformers: `bash scripts/run_seq_transformer.sh cycle_check graph-token` (or `autograph`)

4. For shortest path:
   - Generate graphs: `bash scripts/get_graph_token_graphs.sh shortest-path`
   - Produce graph-token sequences: `bash scripts/get_graph_token_shortest_path_seq.sh`
   - Produce autograph sequences: `bash scripts/get_autograph_shortest_paths.sh`
   - Train GraphGPS baseline: `bash scripts/run_graphgps_shortest_paths.sh`
   - Train GatedGCN baseline: `bash scripts/run_gatedgcn_shortest_paths.sh`
   - Train sequence transformers: `bash scripts/run_seq_transformer.sh shortest_path graph-token` (or `autograph`)

5. For ZINC:
   - Tokenize data: `bash scripts/get_zinc_seqs.sh graph-token` (or `autograph`)
   - Train sequence transformers: `bash scripts/run_seq_transformer.sh zinc graph-token` (or `autograph`)
